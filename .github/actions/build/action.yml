name: Build
description: "Configures and builds project"

inputs:
  configure-flags:
    description: "Additional flags passed to CMake during configuration"
    default: ""

runs:
  using: "composite"
  steps:
    - name: Configure CMake
      shell: pwsh
      run: cmake -B ${{github.workspace}}/build -DCMAKE_BUILD_TYPE=Release -DCMAKE_TOOLCHAIN_FILE="$Env:VCPKG_INSTALLATION_ROOT/scripts/buildsystems/vcpkg.cmake" -DCMAKE_INSTALL_PREFIX="${{github.workspace}}/install" ${{inputs.configure-flags}}
    - name: Build
      shell: pwsh
      run: cmake --build ${{github.workspace}}/build --target install --config ${{env.BUILD_TYPE}} -j
